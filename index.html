<!-- Full HTML with Export/Import functionality included -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Scripture Memory</title>
  <meta name="theme-color" content="#2563eb" />
  <meta name="description" content="Scripture Memory Application - Learn and memorize Bible verses" />

  <!-- Manifest and Service Worker (same as before) -->
  <link rel="manifest" href="manifest.json" />
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('/service-worker.js');
    }
  </script>

  <style>
    /* [Insert your existing full CSS here as-is] */
  </style>
</head>
<body>
  <div class="app-container">
    <div class="header">
      <h1>Scripture Memory</h1>
      <div class="date-display" id="dateDisplay"></div>
      <div class="progress-bar">
        <div class="progress-fill" id="progressFill"></div>
      </div>
      <div id="progressText">0% Complete</div>
    </div>

    <div class="navigation">
      <button class="nav-btn active" onclick="showView('practice')">Practice</button>
      <button class="nav-btn" onclick="showView('verses')">Verses</button>
      <button class="nav-btn" onclick="showView('stats')">Stats</button>
      <button class="nav-btn" onclick="showView('backup')">Backup</button>
    </div>

    <!-- Existing Views: practiceView, versesView, statsView -->
    <!-- [Insert your current full HTML content for these views here as-is] -->

    <!-- Backup View -->
    <div id="backupView" class="verse-management hidden">
      <h2 style="margin-bottom: 20px; color: #2563eb;">Backup & Restore</h2>

      <div style="display: flex; flex-direction: column; gap: 15px;">
        <button class="btn btn-success" onclick="app.exportData()">Export Verses</button>

        <input type="file" id="importFileInput" accept=".json" style="display: none;" onchange="app.importData(this.files[0])">
        <button class="btn btn-secondary" onclick="document.getElementById('importFileInput').click()">Import Verses</button>
        <div id="backupStatus" style="margin-top: 10px; color: #065f46; font-weight: 500;"></div>
      </div>
    </div>
  </div>

  <script>
    class ScriptureMemoryApp {
      constructor() {
        this.verses = JSON.parse(localStorage.getItem('scriptureVerses') || '[]');
        this.currentVerseIndex = 0;
        this.todaysVerses = [];
        this.verseHidden = false;
        this.currentView = 'practice';

        this.initializeApp();
      }

      initializeApp() {
        this.updateDateDisplay();
        this.processVerses();
        this.updateTodaysVerses();
        this.updateDisplay();
        this.updateStats();
        setInterval(() => this.saveData(), 30000);
      }

      // [Include all other existing methods like updateDisplay, toggleVerse, addVerse, etc. as-is]

      showView(viewName) {
        document.getElementById('practiceView')?.classList.add('hidden');
        document.getElementById('versesView')?.classList.add('hidden');
        document.getElementById('statsView')?.classList.add('hidden');
        document.getElementById('backupView')?.classList.add('hidden');

        document.getElementById(viewName + 'View')?.classList.remove('hidden');

        document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
        event.target.classList.add('active');

        if (viewName === 'verses') this.updateVerseList();
        else if (viewName === 'stats') this.updateStats();
        else if (viewName === 'practice') this.updateDisplay();

        this.currentView = viewName;
      }

      exportData() {
        const dataStr = JSON.stringify(this.verses, null, 2);
        const blob = new Blob([dataStr], { type: "application/json" });
        const url = URL.createObjectURL(blob);
        const link = document.createElement("a");
        link.href = url;
        link.download = "scripture_backup.json";
        link.click();
        URL.revokeObjectURL(url);
        document.getElementById("backupStatus").textContent = "Export successful.";
      }

      importData(file) {
        const reader = new FileReader();
        reader.onload = (event) => {
          try {
            const importedVerses = JSON.parse(event.target.result);
            if (!Array.isArray(importedVerses)) throw new Error("Invalid file structure");
            this.verses = importedVerses;
            this.saveData();
            this.updateTodaysVerses();
            this.updateDisplay();
            this.updateStats();
            this.updateVerseList();
            document.getElementById("backupStatus").textContent = "Import successful!";
          } catch (err) {
            document.getElementById("backupStatus").textContent = "Import failed: Invalid file.";
          }
        };
        reader.readAsText(file);
      }

      // [Include saveData(), updateTodaysVerses(), updateStats(), updateVerseList(), etc. here]
    }

    let app;
    function showView(viewName) { app.showView(viewName); }
    function toggleVerse() { app.toggleVerse(); }
    function nextVerse() { app.nextVerse(); }
    function startTest() { app.startTest(); }
    function checkVerse() { app.checkVerse(); }
    function addVerse() { app.addVerse(); }

    document.addEventListener('DOMContentLoaded', function () {
      app = new ScriptureMemoryApp();
      // Optional: Add sample verses if empty
    });
  </script>
</body>
</html>
